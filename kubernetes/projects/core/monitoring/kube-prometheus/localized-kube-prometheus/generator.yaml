apiVersion: kustomize.axolotl.cloud/v1alpha1
kind: JsonnetGenerator
metadata:
  annotations:
    config.kubernetes.io/function: |
      container:
        image: kustomize-generator-jsonnet:latest
        mounts:
          - src: ./jsonnet
            dst: /jsonnet
            type: bind
            rw: true
        network: true
    config.kubernetes.io/local-config: "true"
  name: kube-prometheus-generator
spec:
  projectDir: /jsonnet
  projectFile: config.jsonnet
  useJsonnetBundler: true
